<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Login - ExoList</title>
<link rel="stylesheet" href="css/main.css">
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-app.js";
  import { getAuth, signInWithEmailAndPassword, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyCj6LTxzxI1EUaQ-qTnZjZSkqMDvhRjEy8",
    authDomain: "exolist-b5c02.firebaseapp.com",
    projectId: "exolist-b5c02",
    storageBucket: "exolist-b5c02.firebasestorage.app",
    messagingSenderId: "597550596889",
    appId: "1:597550596889:web:470c4488f9161b68007b88",
    measurementId: "G-79CTWHYEGF"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  const loginForm = document.getElementById("login-form");
  const emailInput = document.getElementById("email");
  const passwordInput = document.getElementById("password");
  const messageBox = document.getElementById("message");

  onAuthStateChanged(auth, (user) => {
    if (user) {
      messageBox.textContent = "Already logged in!";
      messageBox.style.color = "green";
    }
  });

  loginForm.addEventListener("submit", async (e) => {
    e.preventDefault();
    try {
      await signInWithEmailAndPassword(auth, emailInput.value, passwordInput.value);
      messageBox.textContent = "Login successful!";
      messageBox.style.color = "green";
      window.location.href = "admin.html";
    } catch (error) {
      messageBox.textContent = "Login failed: " + error.message;
      messageBox.style.color = "red";
    }
  });

  const logoutBtn = document.getElementById("logout");
  if (logoutBtn) {
    logoutBtn.addEventListener("click", async () => {
      await signOut(auth);
      messageBox.textContent = "Logged out.";
    });
  }
</script>
</head>
<body>
  <div class="content">
    <h1>Admin Login</h1>
    <form id="login-form">
      <label>Email:</label><br>
      <input type="email" id="email" required><br>
      <label>Password:</label><br>
      <input type="password" id="password" required><br><br>
      <button type="submit" class="blue">Login</button>
      <p id="message"></p>
    </form>
  </div>
</body>
</html>
